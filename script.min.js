/*! Twitch Chat Emotes v0.5.16, 2014-06-16, http://cletusc.github.io/Userscript--Twitch-Chat-Emotes/  */
!function a(b,c,d){"use strict";function e(){return B=C=b.$j,D=B(".send-chat-button"),E=B(".chat-buttons-container .chat-option-buttons"),F=B(".chat-interface textarea"),D.length?(r(),f(),u(I.styles()),g(),q(),void b.Twitch.api.get("/api/users/:login/tickets").done(function(a){y(a,"Response from `/api/user/:login/tickets`.",!0),a.tickets.forEach(function(a){if(a.product.emoticons&&a.product.emoticons.length){var b=a.product.features.badge,c=a.product.owner_name;b=b?"http://static-cdn.jtvnw.net/jtv_user_pictures/"+[b.prefix,b.owner,b.type,b.uid,b.sizes[0]].join("-")+"."+b.format:"https://static-cdn.jtvnw.net/jtv_user_pictures/subscriber-star.png",J.subscriptions.badges[c]=b,a.product.emoticons.forEach(function(a){J.subscriptions.emotes[s(new RegExp(a.regex))]={channel:c,url:a.url}})}})})):void console.warn(O.NO_CHAT_ELEMENT)}function f(){G=B(I.emoteButton()),G.appendTo(E),G.hide(),b.BetterTTV?G.fadeIn():D.animate({left:"121px"},{complete:function(){G.fadeIn()}}),H=B(I.menu()),H.appendTo(document.body)}function g(){G.popup("click_to_close",H,{above:!0}),G.on("click",function(){if(H.removeClass("has_moved"),H.is(":visible"))if(B(this).addClass("active"),H.hasClass("not_default_location"))H.offset(JSON.parse(H.attr("data-offset")));else{var a=H.height()-H.find("#all-emotes-group").height(),b=B(".chat-messages");H.height(b.outerHeight()-(H.outerHeight()-H.height())),H.width(b.outerWidth()-(H.outerWidth()-H.width())),H.offset(b.offset()),H.find("#all-emotes-group").height(H.height()-a),H.find("#all-emotes-group").width(H.width()),H.find(".scrollable").customScrollbar("resize")}else B(this).removeClass("active");h()}),H.on("clickoutside",function(){!B(this).hasClass("has_moved")&&B(this).is(":visible")&&G.click()}),H.draggable({handle:".draggable",start:function(){B(this).addClass("has_moved"),B(this).addClass("not_default_location")},stop:function(){H.attr("data-offset",JSON.stringify(H.offset()))},containment:B(document.body)}),H.resizable({handle:'[data-command="resize-handle"]',resize:function(){B(this).addClass("has_moved"),B(this).addClass("not_default_location"),H.find(".scrollable").customScrollbar("resize")},alsoResize:H.find(".scrollable"),containment:B(document.body),minHeight:180,minWidth:200}),H.find('[data-command="reset-popularity"]').on("click",function(){m(),h()}),H.find('[data-command="toggle-popular-emote-location"]').on("click",function(){var a=+v("emote-popular-on-top",0);w("emote-popular-on-top",a?0:1),i(!a)}),H.on("click",".emote",function(){o(B(this).attr("data-emote"))}),H.find(".scrollable").customScrollbar({skin:"default-skin",hScroll:!1,preventDefaultScroll:!0})}function h(){function a(a,c){var d=l(a.text),e=l(c.text),f="number"==typeof d,g="number"==typeof e;return f&&!g?-1:g&&!f?1:e>d?1:d>e?-1:b(a,c)}function b(a,b){return a=a.text,b=b.text,a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:b>a?-1:a>b?1:0}function c(a,c){if(a.channel&&"Twitch Turbo"===a.channel&&(!c.channel||c.channel&&"Twitch Turbo"!==c.channel))return-1;if(c.channel&&"Twitch Turbo"===c.channel&&(!a.channel||a.channel&&"Twitch Turbo"!==a.channel))return 1;var d=[":(",":)",":/",":D",":o",":p",":z",";)",";p","<3",">(","B)","R)","o_o"];if(d.indexOf(a.text)>=0&&d.indexOf(c.text)<0)return-1;if(d.indexOf(c.text)>=0&&d.indexOf(a.text)<0)return 1;if(a.channel&&!c.channel)return 1;if(c.channel&&!a.channel)return-1;if(a.channel&&c.channel){if(J.subscriptions.badges[a.channel]&&!J.subscriptions.badges[c.channel])return-1;if(J.subscriptions.badges[c.channel]&&!J.subscriptions.badges[a.channel])return 1;var e=b({text:a.channel},{text:c.channel}),f=b(a,c);return 0===e?f:e}return b(a,c)}var d;i(+v("emote-popular-on-top",!1)),j(),d=H.find("#popular-emotes-group"),d.html(""),J.usable.sort(a),J.usable.forEach(function(a){p(a,d)}),d=H.find("#all-emotes-group"),d.find(".overview").length&&(d=d.find(".overview")),d.html(""),J.usable.sort(c),J.usable.forEach(function(a){p(a,d,!0)}),H.find(".scrollable").customScrollbar("resize")}function i(a){var b=H.find("#popular-emotes-group"),c=b.prev(),d=H.find("#all-emotes-group"),e=H.find(".icon-popular-emotes-location");a?(c.insertBefore(d.prev()),b.insertBefore(d.prev()),e.removeClass("popular-on-bottom")):(b.insertAfter(d),c.insertAfter(d),e.addClass("popular-on-bottom"))}function j(){J.usable=[],J.raw.forEach(function(a){if(!a.hidden){a.text||(a.text=s(a.regex)),J.subscriptions.emotes[a.text]&&(a.channel=J.subscriptions.emotes[a.text].channel);var b;a.images.some(function(c){return null===c.emoticon_set&&(b=c),J.subscriptions.emotes[a.text]&&c.url===J.subscriptions.emotes[a.text].url?(a.image=c,!0):void 0}),a.image=a.image||b,a.image&&!a.image.html&&(a.image.html='<img src="'+a.image.url+'">'),a.image&&null!==a.image.url&&J.usable.push(a)}})}function k(a,b){n(),K[a]===d&&(K[a]=0),"number"==typeof b&&b>=0?K[a]=b:K[a]++,w("emote-popularity-tracking",JSON.stringify(K))}function l(a){return n(),"number"==typeof K[a]&&K[a]>=0?K[a]:!1}function m(){x("emote-popularity-tracking"),K=!1,n()}function n(){K||(K=JSON.parse(v("emote-popularity-tracking","{}")),k("BibleThump",0),k("DansGame",0),k("FailFish",0),k("Kappa",0),k("Kreygasm",0),k("SwiftRage",0))}function o(a){k(a);var c=document.querySelector("#chat_text_input, .chat-interface textarea"),d=c.selectionStart+a.length,e=c.value,f=e.substring(0,c.selectionStart),g=e.substring(c.selectionEnd,e.length);""!==f&&" "!==f.substr(-1)&&(a=" "+a),a=f+a+" "+g,b.App.__container__.lookup("controller:chat").get("currentRoom").set("messageToSend",a),c.focus(),d=c.selectionStart+a.length,c.setSelectionRange(d,d),H.hasClass("has_moved")?h():G.click()}function p(a,b,c){if(a&&a.image&&b.length){if(c&&a.channel&&"Twitch Turbo"!==a.channel){var d=J.subscriptions.badges[a.channel]||a.badge;J.subscriptions.badges[a.channel]||H.find(".group-header.addon-emotes-header").length||b.append(B(I.emoteGroupHeader({isAddonHeader:!0}))),H.find('.group-header[data-emote-channel="'+a.channel+'"]').length||b.append(B(I.emoteGroupHeader({badge:d,channel:a.channel})))}b.append(B(I.emote({image:a.image.html,text:a.text})))}}function q(){function a(){for(var a in c)c.hasOwnProperty(a)&&-1===b.indexOf(a)&&t(I.newsMessage({scriptName:M,message:c[a],id:a}),!0);B("#chat_lines, .chat-messages").on("click",'a[data-command="twitch-chat-emotes:dismiss-news"]',function(a){a.preventDefault(),b.push(B(this).data("news-id")),w("twitch-chat-emotes:dismissed-news",JSON.stringify(b)),B(this).parent().parent().remove()})}var b=JSON.parse(v("twitch-chat-emotes:dismissed-news","[]")),c=JSON.parse(v("twitch-chat-emotes:cached-news","{}"));N||Date.now()-v("twitch-chat-emotes:news-date",0)>864e5?B.ajax("https://api.github.com/repos/cletusc/Userscript--Twitch-Chat-Emotes/contents/news.json",{dataType:"json",headers:{Accept:"application/vnd.github.v3.raw+json","User-Agent":"cletusc/Userscript--Twitch-Chat-Emotes"}}).done(function(a){c=a||c,w("twitch-chat-emotes:cached-news",JSON.stringify(c))}).always(function(){a(),w("twitch-chat-emotes:news-date",Date.now())}):a()}function r(){!function(a){a.fn.resizable=function(b){function c(a){var b=a.data,c={};b.diffX=Math.round((a.pageX-b.pageX)/f.snapSize)*f.snapSize,b.diffY=Math.round((a.pageY-b.pageY)/f.snapSize)*f.snapSize,(Math.abs(b.diffX)>0||Math.abs(b.diffY)>0)&&(f.element.height()!==b.height+b.diffY&&b.height+b.diffY>=f.minHeight&&b.height+b.diffY<=f.maxHeight&&(f.containment?b.outerHeight+b.diffY+b.offset.top<=f.containment.offset().top+f.containment.outerHeight():!0)&&(f.element.height(b.height+b.diffY),c.height=!0),f.element.width()!==b.width+b.diffX&&b.width+b.diffX>=f.minWidth&&b.width+b.diffX<=f.maxWidth&&(f.containment?b.outerWidth+b.diffX+b.offset.left<=f.containment.offset().left+f.containment.outerWidth():!0)&&(f.element.width(b.width+b.diffX),c.width=!0),(c.height||c.width)&&(f.resizeOnce&&(f.resizeOnce.bind(f.element)(a.data),f.resizeOnce=null),f.resize&&f.resize.bind(f.element)(a.data),f.alsoResize&&(!c.height||"height"!==f.alsoResizeType&&"both"!==f.alsoResizeType||f.alsoResize.height(b.alsoResizeHeight+b.diffY),!c.width||"width"!==f.alsoResizeType&&"both"!==f.alsoResizeType||f.alsoResize.width(b.alsoResizeWidth+b.diffX))))}function d(b){b.preventDefault(),f.start&&f.start.bind(f.element)();var d={alsoResizeHeight:f.alsoResize?f.alsoResize.height():0,alsoResizeWidth:f.alsoResize?f.alsoResize.width():0,height:f.element.height(),offset:f.element.offset(),outerHeight:f.element.outerHeight(),outerWidth:f.element.outerWidth(),pageX:b.pageX,pageY:b.pageY,width:f.element.width()};a(document).on("mousemove","*",d,c),a(document).on("mouseup","*",e)}function e(){f.stop&&f.stop.bind(f.element)(),a(document).off("mousemove","*",c),a(document).off("mouseup","*",e)}var f=a.extend({alsoResize:null,alsoResizeType:"both",containment:null,create:null,destroy:null,handle:".resize-handle",maxHeight:9999,maxWidth:9999,minHeight:0,minWidth:0,resize:null,resizeOnce:null,snapSize:1,start:null,stop:null},b);if(f.element=a(this),f.handle){if(f.alsoResize&&["both","height","width"].indexOf(f.alsoResizeType)>=0&&(f.alsoResize=a(f.alsoResize)),f.containment&&(f.containment=a(f.containment)),f.handle=a(f.handle),f.snapSize=f.snapSize<1?1:f.snapSize,"destroy"===b)return f.handle.off("mousedown",d),f.destroy&&f.destroy.bind(this)(),this;f.handle.on("mousedown",d),f.create&&f.create.bind(this)()}return this}}(C),function(a){a.fn.customScrollbar=function(c,e){var f={skin:d,hScroll:!0,vScroll:!0,updateOnWindowResize:!1,animationSpeed:300,onCustomScroll:d,swipeSpeed:1,wheelSpeed:40,fixedThumbWidth:d,fixedThumbHeight:d},g=function(b,c){this.$element=a(b),this.options=c,this.addScrollableClass(),this.addSkinClass(),this.addScrollBarComponents(),this.options.vScroll&&(this.vScrollbar=new h(this,new j)),this.options.hScroll&&(this.hScrollbar=new h(this,new i)),this.$element.data("scrollable",this),this.initKeyboardScrolling(),this.bindEvents()};g.prototype={addScrollableClass:function(){this.$element.hasClass("scrollable")||(this.scrollableAdded=!0,this.$element.addClass("scrollable"))},removeScrollableClass:function(){this.scrollableAdded&&this.$element.removeClass("scrollable")},addSkinClass:function(){"string"!=typeof this.options.skin||this.$element.hasClass(this.options.skin)||(this.skinClassAdded=!0,this.$element.addClass(this.options.skin))},removeSkinClass:function(){this.skinClassAdded&&this.$element.removeClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort(),0==this.$viewPort.length&&(this.$element.wrapInner('<div class="viewport" />'),this.assignViewPort(),this.viewPortAdded=!0),this.assignOverview(),0==this.$overview.length&&(this.$viewPort.wrapInner('<div class="overview" />'),this.assignOverview(),this.overviewAdded=!0),this.addScrollBar("vertical","prepend"),this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical"),this.removeScrollbar("horizontal"),this.overviewAdded&&this.$element.unwrap(),this.viewPortAdded&&this.$element.unwrap()},removeScrollbar:function(a){this[a+"ScrollbarAdded"]&&this.$element.find(".scroll-bar."+a).remove()},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(a,b){0==this.$element.find(".scroll-bar."+a).length&&(this.$element[b]("<div class='scroll-bar "+a+"'><div class='thumb'></div></div>"),this[a+"ScrollbarAdded"]=!0)},resize:function(a){this.vScrollbar&&this.vScrollbar.resize(a),this.hScrollbar&&this.hScrollbar.resize(a)},scrollTo:function(a){this.vScrollbar&&this.vScrollbar.scrollToElement(a),this.hScrollbar&&this.hScrollbar.scrollToElement(a)},scrollToXY:function(a,b){this.scrollToX(a),this.scrollToY(b)},scrollToX:function(a){this.hScrollbar&&this.hScrollbar.scrollOverviewTo(a,!0)},scrollToY:function(a){this.vScrollbar&&this.vScrollbar.scrollOverviewTo(a,!0)},remove:function(){this.removeScrollableClass(),this.removeSkinClass(),this.removeScrollbarComponents(),this.$element.data("scrollable",null),this.removeKeyboardScrolling(),this.vScrollbar&&this.vScrollbar.remove(),this.hScrollbar&&this.hScrollbar.remove()},setAnimationSpeed:function(a){this.options.animationSpeed=a},isInside:function(b,c){var d=a(b),e=a(c),f=d.offset(),g=e.offset();return f.top>=g.top&&f.left>=g.left&&f.top+d.height()<=g.top+e.height()&&f.left+d.width()<=g.left+e.width()},initKeyboardScrolling:function(){var a=this;this.elementKeydown=function(b){document.activeElement===a.$element[0]&&(a.vScrollbar&&a.vScrollbar.keyScroll(b),a.hScrollbar&&a.hScrollbar.keyScroll(b))},this.$element.attr("tabindex","-1").keydown(this.elementKeydown)},removeKeyboardScrolling:function(){this.$element.removeAttr("tabindex").unbind("keydown",this.elementKeydown)},bindEvents:function(){this.options.onCustomScroll&&this.$element.on("customScroll",this.options.onCustomScroll)}};var h=function(a,b){this.scrollable=a,this.sizing=b,this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element),this.$thumb=this.$scrollBar.find(".thumb"),this.setScrollPosition(0,0),this.resize(),this.initMouseMoveScrolling(),this.initMouseWheelScrolling(),this.initTouchScrolling(),this.initMouseClickScrolling(),this.initWindowResize()};h.prototype={resize:function(a){this.scrollable.$viewPort.height(this.scrollable.$element.height()),this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element)),this.viewPortSize=this.sizing.size(this.scrollable.$viewPort),this.overviewSize=this.sizing.size(this.scrollable.$overview),this.ratio=this.viewPortSize/this.overviewSize,this.sizing.size(this.$scrollBar,this.viewPortSize),this.thumbSize=this.calculateThumbSize(),this.sizing.size(this.$thumb,this.thumbSize),this.maxThumbPosition=this.calculateMaxThumbPosition(),this.maxOverviewPosition=this.calculateMaxOverviewPosition(),this.enabled=this.overviewSize>this.viewPortSize,this.scrollPercent===d&&(this.scrollPercent=0),this.enabled?this.rescroll(a):this.setScrollPosition(0,0),this.$scrollBar.toggle(this.enabled)},calculateThumbSize:function(){var a,b=this.sizing.fixedThumbSize(this.scrollable.options);return a=b?b:this.ratio*this.viewPortSize,Math.max(a,this.sizing.minSize(this.$thumb))},initMouseMoveScrolling:function(){var b=this;this.$thumb.mousedown(function(a){b.enabled&&b.startMouseMoveScrolling(a)}),this.documentMouseup=function(a){b.stopMouseMoveScrolling(a)},a(document).mouseup(this.documentMouseup),this.documentMousemove=function(a){b.mouseMoveScroll(a)},a(document).mousemove(this.documentMousemove),this.$thumb.click(function(a){a.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind(),a(document).unbind("mouseup",this.documentMouseup),a(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var a=this;this.scrollable.$element.mousewheel(function(b,c,d,e){a.enabled&&a.mouseWheelScroll(d,e)&&(b.stopPropagation(),b.preventDefault())})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var a=this;this.elementTouchstart=function(b){a.enabled&&a.startTouchScrolling(b)},this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart),this.documentTouchmove=function(b){a.touchScroll(b)},document.addEventListener("touchmove",this.documentTouchmove),this.elementTouchend=function(b){a.stopTouchScrolling(b)},this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){document.addEventListener&&(this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart),document.removeEventListener("touchmove",this.documentTouchmove),this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend))},initMouseClickScrolling:function(){var a=this;this.scrollBarClick=function(b){a.mouseClickScroll(b)},this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var c=this;this.windowResize=function(){c.resize()},a(b).resize(this.windowResize)}},removeWindowResize:function(){a(b).unbind("resize",this.windowResize)},isKeyScrolling:function(a){return null!=this.keyScrollDelta(a)},keyScrollDelta:function(a){for(var b in this.sizing.scrollingKeys)if(b==a)return this.sizing.scrollingKeys[a](this.viewPortSize);return null},startMouseMoveScrolling:function(b){this.mouseMoveScrolling=!0,a("html").addClass("not-selectable"),this.setUnselectable(a("html"),"on"),this.setScrollEvent(b)},stopMouseMoveScrolling:function(){this.mouseMoveScrolling=!1,a("html").removeClass("not-selectable"),this.setUnselectable(a("html"),null)},setUnselectable:function(a,b){a.attr("unselectable")!=b&&(a.attr("unselectable",b),a.find(":not(input)").attr("unselectable",b))},mouseMoveScroll:function(a){if(this.mouseMoveScrolling){var b=this.sizing.mouseDelta(this.scrollEvent,a);this.scrollThumbBy(b),this.setScrollEvent(a)}},startTouchScrolling:function(a){a.touches&&1==a.touches.length&&(this.setScrollEvent(a.touches[0]),this.touchScrolling=!0,a.stopPropagation())},touchScroll:function(a){if(this.touchScrolling&&a.touches&&1==a.touches.length){var b=-this.sizing.mouseDelta(this.scrollEvent,a.touches[0])*this.scrollable.options.swipeSpeed,c=this.scrollOverviewBy(b);c&&(a.stopPropagation(),a.preventDefault(),this.setScrollEvent(a.touches[0]))}},stopTouchScrolling:function(a){this.touchScrolling=!1,a.stopPropagation()},mouseWheelScroll:function(a,b){var c=-this.sizing.wheelDelta(a,b)*this.scrollable.options.wheelSpeed;return 0!=c?this.scrollOverviewBy(c):void 0},mouseClickScroll:function(a){var b=this.viewPortSize-20;a["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()]&&(b=-b),this.scrollOverviewBy(b)},keyScroll:function(a){var b=a.which;this.enabled&&this.isKeyScrolling(b)&&this.scrollOverviewBy(this.keyScrollDelta(b))&&a.preventDefault()},scrollThumbBy:function(a){var b=this.thumbPosition();b+=a,b=this.positionOrMax(b,this.maxThumbPosition);var c=this.scrollPercent;this.scrollPercent=b/this.maxThumbPosition;var d=b*this.maxOverviewPosition/this.maxThumbPosition;return this.setScrollPosition(d,b),c!=this.scrollPercent?(this.triggerCustomScroll(c),!0):!1},thumbPosition:function(){return this.$thumb.position()[this.sizing.offsetComponent()]},scrollOverviewBy:function(a){var b=this.overviewPosition()+a;return this.scrollOverviewTo(b,!1)},overviewPosition:function(){return-this.scrollable.$overview.position()[this.sizing.offsetComponent()]},scrollOverviewTo:function(a,b){a=this.positionOrMax(a,this.maxOverviewPosition);var c=this.scrollPercent;this.scrollPercent=a/this.maxOverviewPosition;var d=this.scrollPercent*this.maxThumbPosition;return b?this.setScrollPositionWithAnimation(a,d):this.setScrollPosition(a,d),c!=this.scrollPercent?(this.triggerCustomScroll(c),!0):!1},positionOrMax:function(a,b){return 0>a?0:a>b?b:a},triggerCustomScroll:function(a){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(a,this.scrollPercent),scrollPercent:100*this.scrollPercent})},rescroll:function(a){if(a){var b=this.positionOrMax(this.overviewPosition(),this.maxOverviewPosition);this.scrollPercent=b/this.maxOverviewPosition;var c=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(b,c)}else{var c=this.scrollPercent*this.maxThumbPosition,b=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(b,c)}},setScrollPosition:function(a,b){this.$thumb.css(this.sizing.offsetComponent(),b+"px"),this.scrollable.$overview.css(this.sizing.offsetComponent(),-a+"px")},setScrollPositionWithAnimation:function(a,b){var c={},d={};c[this.sizing.offsetComponent()]=b+"px",this.$thumb.animate(c,this.scrollable.options.animationSpeed),d[this.sizing.offsetComponent()]=-a+"px",this.scrollable.$overview.animate(d,this.scrollable.options.animationSpeed)},calculateMaxThumbPosition:function(){return this.sizing.size(this.$scrollBar)-this.thumbSize},calculateMaxOverviewPosition:function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)},setScrollEvent:function(a){var b="page"+this.sizing.scrollAxis();this.scrollEvent&&this.scrollEvent[b]==a[b]||(this.scrollEvent={pageX:a.pageX,pageY:a.pageY})},scrollToElement:function(b){var c=a(b);if(this.sizing.isInside(c,this.scrollable.$overview)&&!this.sizing.isInside(c,this.scrollable.$viewPort)){{var d=c.offset(),e=this.scrollable.$overview.offset();this.scrollable.$viewPort.offset()}this.scrollOverviewTo(d[this.sizing.offsetComponent()]-e[this.sizing.offsetComponent()],!0)}},remove:function(){this.removeMouseMoveScrolling(),this.removeMouseWheelScrolling(),this.removeTouchScrolling(),this.removeMouseClickScrolling(),this.removeWindowResize()}};var i=function(){};i.prototype={size:function(a,b){return b?a.width(b):a.width()},minSize:function(a){return parseInt(a.css("min-width"))||0},fixedThumbSize:function(a){return a.fixedThumbWidth},scrollBar:function(a){return a.find(".scroll-bar.horizontal")},mouseDelta:function(a,b){return b.pageX-a.pageX},offsetComponent:function(){return"left"},wheelDelta:function(a){return a},scrollAxis:function(){return"X"},scrollDirection:function(a,b){return b>a?"right":"left"},scrollingKeys:{37:function(){return-10},39:function(){return 10}},isInside:function(b,c){var d=a(b),e=a(c),f=d.offset(),g=e.offset();return f.left>=g.left&&f.left+d.width()<=g.left+e.width()}};var j=function(){};return j.prototype={size:function(a,b){return b?a.height(b):a.height()},minSize:function(a){return parseInt(a.css("min-height"))||0},fixedThumbSize:function(a){return a.fixedThumbHeight},scrollBar:function(a){return a.find(".scroll-bar.vertical")},mouseDelta:function(a,b){return b.pageY-a.pageY},offsetComponent:function(){return"top"},wheelDelta:function(a,b){return b},scrollAxis:function(){return"Y"},scrollDirection:function(a,b){return b>a?"down":"up"},scrollingKeys:{38:function(){return-10},40:function(){return 10},33:function(a){return-(a-20)},34:function(a){return a-20}},isInside:function(b,c){var d=a(b),e=a(c),f=d.offset(),g=e.offset();return f.top>=g.top&&f.top+d.height()<=g.top+e.height()}},this.each(function(){if(c==d&&(c=f),"string"==typeof c){var b=a(this).data("scrollable");b&&b[c](e)}else{if("object"!=typeof c)throw"Invalid type of options";c=a.extend(f,c),new g(a(this),c)}})}}(C),function(a){function c(c){var e=c||b.event,f=[].slice.call(arguments,1),g=0,h=0,i=0;return c=a.event.fix(e),c.type="mousewheel",e.wheelDelta&&(g=e.wheelDelta/120),e.detail&&(g=-e.detail/3),i=g,e.axis!==d&&e.axis===e.HORIZONTAL_AXIS&&(i=0,h=g),e.wheelDeltaY!==d&&(i=e.wheelDeltaY/120),e.wheelDeltaX!==d&&(h=e.wheelDeltaX/120),f.unshift(c,g,h,i),(a.event.dispatch||a.event.handle).apply(this,f)}var e=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var f=e.length;f;)a.event.fixHooks[e[--f]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=e.length;a;)this.addEventListener(e[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=e.length;a;)this.removeEventListener(e[--a],c,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(C)}function s(a){return"string"==typeof a&&(a=new RegExp(a)),decodeURI(a.source).replace("&gt\\;",">").replace("&lt\\;","<").replace(/\(\?![^)]*\)/g,"").replace(/\(([^|])*\|?[^)]*\)/g,"$1").replace(/\[([^|])*\|?[^\]]*\]/g,"$1").replace(/[^\\]\?/g,"").replace(/^\\b|\\b$/g,"").replace(/\\/g,"")}function t(a,b){var c=App.__container__.lookup("controller:chat");if(b){var d=location.href+"#admin-message-workaround-"+Math.random();return c.currentRoom.addTmiMessage(d),setTimeout(function(){B('a[href="'+d+'"]').get(0).outerHTML=a},0),!0}return c.currentRoom.addTmiMessage(a)}function u(a){var b=document.createElement("style");b.textContent=a,document.querySelector("head").appendChild(b)}function v(a,b){var c=localStorage.getItem(a);return null===c&&"undefined"!=typeof b?b:c}function w(a,b){localStorage.setItem(a,b)}function x(a){localStorage.removeItem(a)}function y(a,b,c){N&&console.log("[DEBUG]["+(M||"UNKNOWN SCRIPT")+"]: "+(b||""),c?JSON.stringify(a):a)}if(c){var z=document.createElement("script");return z.textContent="("+a+")(window, false)",document.body.appendChild(z),void document.body.removeChild(z)}var A={};!function(a,b){function c(a){return String(null===a||void 0===a?"":a)}function d(a){return a=c(a),j.test(a)?a.replace(e,"&amp;").replace(f,"&lt;").replace(g,"&gt;").replace(h,"&#39;").replace(i,"&quot;"):a}a.Template=function(a,c,d,e){this.r=a||this.r,this.c=d,this.options=e,this.text=c||"",this.buf=b?[]:""},a.Template.prototype={r:function(){return""},v:d,t:c,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},rp:function(a,b,c,d){var e=c[a];return e?(this.c&&"string"==typeof e&&(e=this.c.compile(e,this.options)),e.ri(b,c,d)):""},rs:function(a,b,c){var d=a[a.length-1];if(!k(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return k(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ls(a,b,c,d,e,f,g)),h=""===a||!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,b,c,d){var e=a.split("."),f=this.f(e[0],b,c,d),g=null;if("."===a&&k(b[b.length-2]))return b[b.length-1];for(var h=1;h<e.length;h++)f&&"object"==typeof f&&e[h]in f?(g=f,f=f[e[h]]):f="";return d&&!f?!1:(d||"function"!=typeof f||(b.push(g),f=this.lv(f,b,c),b.pop()),f)},f:function(a,b,c,d){for(var e=!1,f=null,g=!1,h=b.length-1;h>=0;h--)if(f=b[h],f&&"object"==typeof f&&a in f){e=f[a],g=!0;break}return g?(d||"function"!=typeof e||(e=this.lv(e,b,c)),e):d?!1:""},ho:function(a,b,c,d,e){var f=this.c,g=this.options;g.delimiters=e;var d=a.call(b,d);return d=null==d?String(d):d.toString(),this.b(f.compile(d,g).render(b,c)),!1},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ls:function(a,b,c,d,e,f,g){var h=b[b.length-1],i=null;if(!d&&this.c&&a.length>0)return this.ho(a,h,c,this.text.substring(e,f),g);if(i=a.call(h),"function"==typeof i){if(d)return!0;if(this.c)return this.ho(i,h,c,this.text.substring(e,f),g)}return i},lv:function(a,b,d){var e=b[b.length-1],f=a.call(e);return"function"==typeof f&&(f=c(f.call(e)),this.c&&~f.indexOf("{{"))?this.c.compile(f,this.options).render(e,d):c(f)}};var e=/&/g,f=/</g,g=/>/g,h=/\'/g,i=/\"/g,j=/[&<>\"\']/,k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:A);var B,C,D,E,F,G,H,I=function(){var a={emote:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="emote" data-emote="'),d.b(d.v(d.f("text",a,b,0))),d.b('" title="'),d.b(d.v(d.f("text",a,b,0))),d.b('">\r'),d.b("\n"+c),d.b("	"),d.b(d.t(d.f("image",a,b,0))),d.b("\r"),d.b("\n"+c),d.b("</div>\r"),d.b("\n"),d.fl()}),emoteButton:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b('<button class="button glyph-only" title="Emote Menu" id="emote-menu-button"></button>\r'),d.b("\n"),d.fl()}),emoteGroupHeader:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("isAddonHeader",a,b,1),a,b,0,18,218,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<div class="group-header addon-emotes-header" title="Below are emotes added by an addon. Only those who also have the same addon installed can see these emotes in chat.">\r'),d.b("\n"+c),d.b("		Addon Emotes\r"),d.b("\n"+c),d.b("	</div>\r"),d.b("\n")}),a.pop()),d.b("\r"),d.b("\n"+c),d.s(d.f("isAddonHeader",a,b,1),a,b,1,0,0,"")||(d.b('	<div class="group-header" data-emote-channel="'),d.b(d.v(d.f("channel",a,b,0))),d.b('"><img src="'),d.b(d.v(d.f("badge",a,b,0))),d.b('" />'),d.b(d.v(d.f("channel",a,b,0))),d.b("</div>\r"),d.b("\n")),d.fl()}),menu:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="emote-menu dropmenu" id="emote-menu-for-twitch">\r'),d.b("\n"+c),d.b('	<div class="draggable"></div>\r'),d.b("\n"+c),d.b("\r"),d.b("\n"+c),d.b('	<div class="group-header">All Emotes</div>\r'),d.b("\n"+c),d.b('	<div class="group-container scrollable" id="all-emotes-group"></div>\r'),d.b("\n"+c),d.b("\r"),d.b("\n"+c),d.b('	<div class="group-header">Popular Emotes</div>\r'),d.b("\n"+c),d.b('	<div class="group-container single-row" id="popular-emotes-group"></div>\r'),d.b("\n"+c),d.b("\r"),d.b("\n"+c),d.b('	<div class="footer">\r'),d.b("\n"+c),d.b('		<a class="pull-left icon icon-github" href="https://github.com/cletusc/Userscript--Twitch-Chat-Emotes" target="_blank" title="Visit the project page on Github"></a>\r'),d.b("\n"+c),d.b('		<a class="pull-left icon icon-popular-emotes-location" data-command="toggle-popular-emote-location" title="Change popular emotes location"></a>\r'),d.b("\n"+c),d.b('		<a title="Reset the popularity of the emotes back to default" data-command="reset-popularity">Reset Popularity</a>\r'),d.b("\n"+c),d.b('		<a class="pull-right icon icon-resize-handle" data-command="resize-handle"></a>\r'),d.b("\n"+c),d.b("	</div>\r"),d.b("\n"+c),d.b("</div>\r"),d.b("\n"),d.fl()}),newsMessage:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b("\r"),d.b("\n"+c),d.b('<div class="twitch-chat-emotes-news">\r'),d.b("\n"+c),d.b("	["),d.b(d.v(d.f("scriptName",a,b,0))),d.b("] News: "),d.b(d.t(d.f("message",a,b,0))),d.b(' (<a href="#" data-command="twitch-chat-emotes:dismiss-news" data-news-id="'),d.b(d.v(d.f("id",a,b,0))),d.b('">Dismiss</a>)\r'),d.b("\n"+c),d.b("</div>\r"),d.b("\n"),d.fl()}),styles:new A.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b("/* CSS minified. */\r"),d.b("\n"+c),d.b(".scrollable{position:relative}.scrollable:focus{outline:0}.scrollable .viewport{position:relative;overflow:hidden}.scrollable .viewport .overview{position:absolute}.scrollable .scroll-bar{display:none}.scrollable .scroll-bar.vertical{position:absolute;right:0;height:100%}.scrollable .scroll-bar.horizontal{position:relative;width:100%}.scrollable .scroll-bar .thumb{position:absolute}.scrollable .scroll-bar.vertical .thumb{width:100%;min-height:10px}.scrollable .scroll-bar.horizontal .thumb{height:100%;min-width:10px;left:0}.not-selectable{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.scrollable.default-skin{padding-right:10px;padding-bottom:6px}.scrollable.default-skin .scroll-bar.vertical{width:6px}.scrollable.default-skin .scroll-bar.horizontal{height:6px}.scrollable.default-skin .scroll-bar .thumb{background-color:#000;opacity:.4;border-radius:3px;-moz-border-radius:4px;-webkit-border-radius:4px}.scrollable.default-skin .scroll-bar:hover .thumb{opacity:.6}.scrollable.gray-skin{padding-right:17px}.scrollable.gray-skin .scroll-bar{border:1px solid gray;background-color:#d3d3d3}.scrollable.gray-skin .scroll-bar .thumb{background-color:gray}.scrollable.gray-skin .scroll-bar:hover .thumb{background-color:#000}.scrollable.gray-skin .scroll-bar.vertical{width:10px}.scrollable.gray-skin .scroll-bar.horizontal{height:10px;margin-top:2px}.scrollable.modern-skin{padding-right:17px}.scrollable.modern-skin .scroll-bar{border:1px solid gray;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;-moz-box-shadow:inset 0 0 5px #888;-webkit-box-shadow:inset 0 0 5px #888;box-shadow:inset 0 0 5px #888}.scrollable.modern-skin .scroll-bar .thumb{background-color:#95aabf;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;border:1px solid #536984}.scrollable.modern-skin .scroll-bar.vertical .thumb{width:8px;background:-moz-linear-gradient(left,#95aabf 0,#547092 100%);background:-webkit-gradient(linear,left top,right top,color-stop(0%,#95aabf),color-stop(100%,#547092));background:-webkit-linear-gradient(left,#95aabf 0,#547092 100%);background:-o-linear-gradient(left,#95aabf 0,#547092 100%);background:-ms-linear-gradient(left,#95aabf 0,#547092 100%);background:linear-gradient(to right,#95aabf 0,#547092 100%);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient( startColorstr='#95aabf', endColorstr='#547092',GradientType=1 )\"}.scrollable.modern-skin .scroll-bar.horizontal .thumb{height:8px;background-image:linear-gradient(#95aabf,#547092);background-image:-o-linear-gradient(#95aabf,#547092);background-image:-moz-linear-gradient(#95aabf,#547092);background-image:-webkit-linear-gradient(#95aabf,#547092);background-image:-ms-linear-gradient(#95aabf,#547092);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient( startColorstr='#95aabf', endColorstr='#547092',GradientType=0 )\"}.scrollable.modern-skin .scroll-bar.vertical{width:10px}.scrollable.modern-skin .scroll-bar.horizontal{height:10px;margin-top:2px}#emote-menu-button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKUSURBVDhPfZTNi1JRGMZvMIsWUZts5SIXFYK0CME/IGghxVC7WUoU1NBixI+mRSD4MQzmxziKO3XUBhRmUGZKdBG40XEGU6d0GFGZcT4qxW1hi7fzvNwZqKwDD5z7vs/vueeee+6VMJxO5wUhhdvtfuHz+T4tLS2NhegfGsMDLxiwHIIhLi57PJ75VCr1Y39/n4bDIY1Go4lCDx54wYCVYzjoVjQa/dxutyfCkwSvYJpgOSQf708tuBa1yWRy/L+V/Cl4wYBFhhTxfLhum/esiiJ1u12KRCJksVhofX2dTk5OzkHMUUMPHnjB2F55VpEhPde/Lbx8FqBEIkHpdJoMBgNptVrS6XRUqVTOg7a3t2lmZob0ej2p1Wr2ggGLDOnJ3QSZH4coHo/TysoKhygUCtJoNFQsFmkwGLAwR7hSqSSVSsVeMGCRIT29F6fXJi8Xy+Uymc1mmp6eJofDQfV6nU5PT1mY2+127uHxSqUSh4FFhhQLvrvtcrm+YpkHBwdUrVZpa2uLarUadTodOjw8ZGGOGnrwwAsGLDLw1i4uLrzRYeOOj49pb2+Pdnd3qdVq8StGAIQ5ao1Ggz3wggGLDD4C4izcEcWfR0dHbMrlcrSxscGbjVAIK8lms7S5ucmB/X6fXz9YDsEQFzdjsVit2Wzyqc1kMrwfVquVjEYjzc3NkclkIpvNRmtra+yBVzAfBXtDjuGgS8FgcFbc8QvuhjNSKBQoFAqR6LFEn/L5PPfggXd5eXkWrBzDQdC1QCBgFoeut7Ozw/tyBp2FQzhPwtOFFwzY34Yo4A9wRXzdD8LhcE48wncE9no9Fuaoid574bkPLxgZ/3uI5pTQVfFlP/L7/Wmhb7JSXq/3IXrwyHZ5SNIvGCnqyh+J7+gAAAAASUVORK5CYII=)!important;background-position:50%;background-repeat:no-repeat;cursor:pointer;margin-left:7px}#emote-menu-button.active{border-radius:2px;background-color:rgba(128,128,128,.5)}.emote-menu{padding:5px;z-index:1000;background-color:#202020}.emote-menu a{color:#fff}.emote-menu a:hover{cursor:pointer;text-decoration:underline;color:#ccc}.emote-menu .emotes-popular{height:38px}.emote-menu .draggable{background-image:repeating-linear-gradient(45deg,transparent,transparent 5px,rgba(255,255,255,.05)5px,rgba(255,255,255,.05)10px);cursor:move;height:7px;margin-bottom:3px}.emote-menu .draggable:hover{background-image:repeating-linear-gradient(45deg,transparent,transparent 5px,rgba(255,255,255,.1)5px,rgba(255,255,255,.1)10px)}.emote-menu .group-header{border-top:1px solid #000;box-shadow:0 1px 0 rgba(255,255,255,.05)inset;background-image:linear-gradient(to top,transparent,rgba(0,0,0,.5));padding:2px;color:#ddd;text-align:center}.emote-menu .group-header img{margin-right:8px}.emote-menu .emote{display:inline-block;padding:2px;margin:1px;cursor:pointer;border-radius:5px;text-align:center;position:relative;width:32px;height:32px}.emote-menu .emote img{max-width:32px;max-height:32px;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0}.emote-menu .single-row{overflow:hidden;height:37px}.emote-menu .single-row .emote{display:inline-block;margin-bottom:100px}.emote-menu .emote:hover{background-color:rgba(255,255,255,.1)}.emote-menu .pull-left{float:left}.emote-menu .pull-right{float:right}.emote-menu .footer{text-align:center;border-top:1px solid #000;box-shadow:0 1px 0 rgba(255,255,255,.05)inset;padding:5px 0 2px;margin-top:5px}.emote-menu .footer .pull-left{margin-right:5px}.emote-menu .footer .pull-right{margin-left:5px}.emote-menu .icon{height:16px;width:16px;opacity:.5}.emote-menu .icon:hover{opacity:1}.emote-menu .icon-github{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiIAAC4iAari3ZIAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAWpJREFUOE+F0ssrRGEYx/EZBhs2ssHCrCasFf4DFiKyERuytRMZESl3WxsbK0s2FlKKxkIJOyRpEgtyv19yfH/H87qm86tPvee9POd5z0zodzzPK8I4NnFuNjCKmG37GxbTMYEXrKMb9aYHKviMYaTZsY8wocPzOEENbOUrzIWhYmeYQ8SW/MUxnKICekMhNJ+FTBvraiOohK414A7HoNbqUAvlCcd4NRprj1KFBmhPVAWGsAXXYlCqkYJt9KnAGvrhxkFJWOe66ooGaq8REdwgKBdQBy1IqsARmqArqFhQktC5VhxosIpBa2sKQZm0vfrPLGmg++uD5KAYKvhflpGNVOwjrgIFeEAbZhFFGXbhkkAJwvZ2tX+HPD1rohdXtnAI/axvcPE/nO0thT52p39Y4UEtzeAS7SjHI1zUYQaacY1p+AU/w4SKxHEPfRP9A1003sEt9IKfh7+HxXx0YRF7ZgEdyLVtllDoHUPsDkVplXakAAAAAElFTkSuQmCC) no-repeat 50%}.emote-menu .icon-popular-emotes-location{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAClSURBVEhL7ZRBDoAgEAN9uj9fKaFkl61EiN5sMgcLnYMHDjObcTbUWUWWDQyZW4ksC37MSEkqCmrMJEn4KMzGTJCsjpku2RkzVbI7Zk4KFGPUnSpQ4HAMunQ3FY1f8IIAYOBRd74TYDBGSlLR+AWLAhwoxqg7/T3YTX8PdiTYhH+wIqlj4AVPJX0M/JjMJGEMwodDSdIYpMLhJXIMZOnA8HZsZscFnEfNs2qCgdQAAAAASUVORK5CYII=) no-repeat 50% top}.emote-menu .icon-popular-emotes-location.popular-on-bottom{background-position:bottom}.emote-menu .icon-resize-handle{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAX0lEQVQ4T6WPUQ7AIAhDPfpuzuyHxpGK7SR5IVYeCS0irqChAw0daOhAQwcaijyAfShARv1aMOWOfcJHBnmgIsvo8glMRkkLtnLneEIpg3U4c5LRtycoMqpcMIaLd7QXl2chH51cR7QAAAAASUVORK5CYII=) no-repeat 50%;cursor:nwse-resize!important}.emote-menu .scrollable.default-skin{padding-right:0;padding-bottom:0}.emote-menu .scrollable.default-skin .scroll-bar .thumb{background-color:#555;opacity:.2;z-index:1}"),d.fl()
})},b=function(b){var c=a[b];return function(b,d,e){return c.render(b,d||a,e)}};return{emote:b("emote"),emoteButton:b("emoteButton"),emoteGroupHeader:b("emoteGroupHeader"),menu:b("menu"),newsMessage:b("newsMessage"),styles:b("styles")}}(),J={usable:[],get raw(){return b.App?b.App.__container__.lookup("controller:emoticons").get("emoticons"):[]},subscriptions:{badges:{},emotes:{}}},K=!1,L=!1,M="Twitch Chat Emotes",N="#twitch-chat-emotes-debug"===location.hash,O={ALREADY_RUNNING:"There is already an instance of this script running, cancelling this instance.",NO_CHAT_ELEMENT:"There is no chat element on the page, unable to continue.",NOT_LOGGED_IN:"You are not logged in, please log in first before using the emote menu.",OBJECTS_NOT_LOADED:"Needed objects haven't loaded yet.",TIMEOUT_SCRIPT_LOAD:"Script took too long to load. Refresh to try again."};for(var P in O)O.hasOwnProperty(P)&&(O[P]="["+M+"]: "+O[P]);!function Q(a){var c=b.Twitch&&b.Twitch.user.isLoggedIn(),f=b.App&&(b.App.ChannelRoute||b.App.ChatRoute),g=b.Twitch!==d&&b.App!==d&&b.App.__container__!==d&&b.App.__container__.lookup("controller:emoticons").get("emoticons")!==d&&b.App.__container__.lookup("controller:emoticons").get("emoticons").length&&b.$j!==d&&document.querySelector("#chat_speak, .send-chat-button");if(!L&&f){var h={activate:function(){this._super(),Q(50)}};b.App.ChannelRoute&&(b.App.ChannelRoute.reopen(h),L=!0),b.App.ChatRoute&&(b.App.ChatRoute.reopen(h),L=!0)}if(document.querySelector("#emote-menu-for-twitch"))return void console.warn(O.ALREADY_RUNNING);if(!g||!c||!f){if(a>=6e4)return console.error(O.TIMEOUT_SCRIPT_LOAD),void t(O.NOT_LOGGED_IN);if(a>=1e4){if(!c)return console.error(O.NOT_LOGGED_IN),void t(O.NOT_LOGGED_IN);g||console.warn(O.OBJECTS_NOT_LOADED)}return void setTimeout(Q,a,2*a)}e()}(50)}(this.unsafeWindow||window,window.chrome?!0:!1);