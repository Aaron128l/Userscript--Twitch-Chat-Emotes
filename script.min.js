/*! Twitch Chat Emotes v0.6.0, Tue, 08 Jul 2014 23:53:56 GMT, http://cletusc.github.io/Userscript--Twitch-Chat-Emotes/ */
!function e(t,i,n){"use strict";function o(){return I(),N.chatButton=z(".send-chat-button"),N.menuButtonContainer=z(".chat-buttons-container .chat-option-buttons"),N.chatBox=z(".chat-interface textarea"),N.chatContainer=z(".chat-messages"),N.chatButton.length?(s(),f(x.styles()),r(),b(),void t.Twitch.api.get("/api/users/:login/tickets",{offset:0,limit:100,unended:!0}).done(function(e){e.tickets.forEach(function(e){if(e.product.emoticons&&e.product.emoticons.length){var t=e.product.features.badge,i=e.product.owner_name;t=t?"http://static-cdn.jtvnw.net/jtv_user_pictures/"+[t.prefix,t.owner,t.type,t.uid,t.sizes[0]].join("-")+"."+t.format:"https://static-cdn.jtvnw.net/jtv_user_pictures/subscriber-star.png",T.subscriptions.badges[i]=t,e.product.emoticons.forEach(function(e){T.subscriptions.emotes[p(new RegExp(e.regex))]={channel:i,url:e.url}})}})})):void console.warn(R.NO_CHAT_ELEMENT)}function s(){N.menuButton=z(x.emoteButton()),N.menuButton.appendTo(N.menuButtonContainer),N.menuButton.hide(),t.BetterTTV?N.menuButton.fadeIn():N.chatButton.animate({left:"121px"},{complete:function(){N.menuButton.fadeIn()}}),N.menu=z(x.menu()),N.menu.appendTo(document.body)}function r(){function e(){function t(i){return z(i.target).is("#emote-menu-for-twitch, #emote-menu-for-twitch *")?void 0:!N.menu.is(":visible")||z(i.target).is("#emote-menu-button, #emote-menu-button *")?void z(document).off("mouseup",t):void(N.menu.hasClass("pinned")||(z(document).off("mouseup",t),e()))}if(N.menu.is(":visible"))N.menu.hide(),N.menu.removeClass("pinned"),N.menuButton.removeClass("active");else if(E.user.login()){if(l(),N.menu.show(),N.menuButton.addClass("active"),z(document).on("mouseup",t),N.menu.hasClass("moved"))N.menu.offset(JSON.parse(N.menu.attr("data-offset")));else{var i=N.menu.height()-N.menu.find("#all-emotes-group").height();N.menu.height(N.chatContainer.outerHeight()-(N.menu.outerHeight()-N.menu.height())),N.menu.width(N.chatContainer.outerWidth()-(N.menu.outerWidth()-N.menu.width())),N.menu.offset(N.chatContainer.offset()),N.menu.find("#all-emotes-group").height(N.menu.height()-i),N.menu.find("#all-emotes-group").width(N.menu.width())}N.menu.find(".scrollable").customScrollbar("resize")}}N.menuButton.on("click",e),N.menu.draggable({handle:".draggable",start:function(){z(this).addClass("pinned"),z(this).addClass("moved")},stop:function(){N.menu.attr("data-offset",JSON.stringify(N.menu.offset()))},containment:z(document.body)}),N.menu.resizable({handle:'[data-command="resize-handle"]',resize:function(){z(this).addClass("pinned"),z(this).addClass("moved"),N.menu.find(".scrollable").customScrollbar("resize")},alsoResize:N.menu.find(".scrollable"),containment:z(document.body),minHeight:180,minWidth:200}),N.menu.find('[data-command="reset-popularity"]').on("click",function(){u(),l()}),N.menu.find('[data-command="toggle-pinned"]').on("click",function(){N.menu.toggleClass("pinned")}),N.menu.on("click",".emote",function(){m(z(this).attr("data-emote"))}),N.menu.find(".scrollable").customScrollbar({skin:"default-skin",hScroll:!1,preventDefaultScroll:!0})}function l(){function e(e,i){var n=h(e.text),o=h(i.text),s="number"==typeof n,r="number"==typeof o;return s&&!r?-1:r&&!s?1:o>n?1:n>o?-1:t(e,i)}function t(e,t){return e=e.text,t=t.text,e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:t>e?-1:e>t?1:0}function i(e,i){if(e.channel&&"Twitch Turbo"===e.channel&&(!i.channel||i.channel&&"Twitch Turbo"!==i.channel))return-1;if(i.channel&&"Twitch Turbo"===i.channel&&(!e.channel||e.channel&&"Twitch Turbo"!==e.channel))return 1;var n=[":(",":)",":/",":D",":o",":p",":z",";)",";p","<3",">(","B)","R)","o_o","#/",":7",":>",":S","<]"];if(n.indexOf(e.text)>=0&&n.indexOf(i.text)<0)return-1;if(n.indexOf(i.text)>=0&&n.indexOf(e.text)<0)return 1;if(e.channel&&!i.channel)return 1;if(i.channel&&!e.channel)return-1;if(e.channel&&i.channel){if(T.subscriptions.badges[e.channel]&&!T.subscriptions.badges[i.channel])return-1;if(T.subscriptions.badges[i.channel]&&!T.subscriptions.badges[e.channel])return 1;var o=t({text:e.channel},{text:i.channel}),s=t(e,i);return 0===o?s:o}return t(e,i)}var n;a(),n=N.menu.find("#popular-emotes-group"),n.html(""),T.usable.sort(e),T.usable.forEach(function(e){g(e,n)}),n=N.menu.find("#all-emotes-group"),n.find(".overview").length&&(n=n.find(".overview")),n.html(""),T.usable.sort(i),T.usable.forEach(function(e){g(e,n,!0)}),N.menu.find(".scrollable").customScrollbar("resize")}function a(){T.usable=[],T.raw.forEach(function(e){if(!e.hidden){e.text||(e.text=p(e.regex)),T.subscriptions.emotes[e.text]&&(e.channel=T.subscriptions.emotes[e.text].channel);var t;e.images.some(function(i){return null===i.emoticon_set&&(t=i),T.subscriptions.emotes[e.text]&&i.url===T.subscriptions.emotes[e.text].url?(e.image=i,!0):void 0}),e.image=e.image||t,e.image&&!e.image.html&&(e.image.html='<img src="'+e.image.url+'">'),e.image&&null!==e.image.url&&T.usable.push(e)}})}function c(e,t){d(),M[e]===n&&(M[e]=0),"number"==typeof t&&t>=0?M[e]=t:M[e]++,A("emote-popularity-tracking",JSON.stringify(M))}function h(e){return d(),"number"==typeof M[e]&&M[e]>=0?M[e]:!1}function u(){w("emote-popularity-tracking"),M=!1,d()}function d(){M||(M=JSON.parse(v("emote-popularity-tracking","{}")),c("BibleThump",0),c("DansGame",0),c("FailFish",0),c("Kappa",0),c("Kreygasm",0),c("SwiftRage",0))}function m(e){c(e);var i=document.querySelector("#chat_text_input, .chat-interface textarea"),n=i.selectionStart+e.length,o=i.value,s=o.substring(0,i.selectionStart),r=o.substring(i.selectionEnd,o.length);""!==s&&" "!==s.substr(-1)&&(e=" "+e),e=s+e+" "+r,t.App.__container__.lookup("controller:chat").get("currentRoom").set("messageToSend",e),i.focus(),n=i.selectionStart+e.length,i.setSelectionRange(n,n),N.menu.hasClass("pinned")?l():N.menuButton.click()}function g(e,t,i){if(e&&e.image&&t.length){if(i&&e.channel&&"Twitch Turbo"!==e.channel){var n=T.subscriptions.badges[e.channel]||e.badge;T.subscriptions.badges[e.channel]||N.menu.find(".group-header.addon-emotes-header").length||t.append(z(x.emoteGroupHeader({isAddonHeader:!0}))),N.menu.find('.group-header[data-emote-channel="'+e.channel+'"]').length||t.append(z(x.emoteGroupHeader({badge:n,channel:e.channel})))}t.append(z(x.emote({image:e.image.html,text:e.text})))}}function b(){function e(){for(var e in i)i.hasOwnProperty(e)&&-1===t.indexOf(e);z("#chat_lines, .chat-messages").on("click",'a[data-command="twitch-chat-emotes:dismiss-news"]',function(e){e.preventDefault(),t.push(z(this).data("news-id")),A("twitch-chat-emotes:dismissed-news",JSON.stringify(t)),z(this).parent().parent().remove()})}var t=JSON.parse(v("twitch-chat-emotes:dismissed-news","[]")),i=JSON.parse(v("twitch-chat-emotes:cached-news","{}"));Date.now()-v("twitch-chat-emotes:news-date",0)>864e5?z.ajax("https://api.github.com/repos/cletusc/Userscript--Twitch-Chat-Emotes/contents/news.json",{dataType:"json",headers:{Accept:"application/vnd.github.v3.raw+json","User-Agent":"cletusc/Userscript--Twitch-Chat-Emotes"}}).done(function(e){i=e||i,A("twitch-chat-emotes:cached-news",JSON.stringify(i))}).always(function(){e(),A("twitch-chat-emotes:news-date",Date.now())}):e()}function p(e){return"string"==typeof e&&(e=new RegExp(e)),decodeURI(e.source).replace("&gt\\;",">").replace("&lt\\;","<").replace(/\(\?![^)]*\)/g,"").replace(/\(([^|])*\|?[^)]*\)/g,"$1").replace(/\[([^|])*\|?[^\]]*\]/g,"$1").replace(/[^\\]\?/g,"").replace(/^\\b|\\b$/g,"").replace(/\\/g,"")}function f(e){var t=document.createElement("style");t.textContent=e,document.querySelector("head").appendChild(t)}function v(e,t){var i=localStorage.getItem(e);return null===i&&"undefined"!=typeof t?t:i}function A(e,t){localStorage.setItem(e,t)}function w(e){localStorage.removeItem(e)}function I(){z=k=t.jQuery,!function(e){e.fn.customScrollbar=function(i,n){var o={skin:void 0,hScroll:!0,vScroll:!0,updateOnWindowResize:!1,animationSpeed:300,onCustomScroll:void 0,swipeSpeed:1,wheelSpeed:40,fixedThumbWidth:void 0,fixedThumbHeight:void 0},s=function(t,i){this.$element=e(t),this.options=i,this.addScrollableClass(),this.addSkinClass(),this.addScrollBarComponents(),this.options.vScroll&&(this.vScrollbar=new r(this,new a)),this.options.hScroll&&(this.hScrollbar=new r(this,new l)),this.$element.data("scrollable",this),this.initKeyboardScrolling(),this.bindEvents()};s.prototype={addScrollableClass:function(){this.$element.hasClass("scrollable")||(this.scrollableAdded=!0,this.$element.addClass("scrollable"))},removeScrollableClass:function(){this.scrollableAdded&&this.$element.removeClass("scrollable")},addSkinClass:function(){"string"!=typeof this.options.skin||this.$element.hasClass(this.options.skin)||(this.skinClassAdded=!0,this.$element.addClass(this.options.skin))},removeSkinClass:function(){this.skinClassAdded&&this.$element.removeClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort(),0==this.$viewPort.length&&(this.$element.wrapInner('<div class="viewport" />'),this.assignViewPort(),this.viewPortAdded=!0),this.assignOverview(),0==this.$overview.length&&(this.$viewPort.wrapInner('<div class="overview" />'),this.assignOverview(),this.overviewAdded=!0),this.addScrollBar("vertical","prepend"),this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical"),this.removeScrollbar("horizontal"),this.overviewAdded&&this.$element.unwrap(),this.viewPortAdded&&this.$element.unwrap()},removeScrollbar:function(e){this[e+"ScrollbarAdded"]&&this.$element.find(".scroll-bar."+e).remove()},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(e,t){0==this.$element.find(".scroll-bar."+e).length&&(this.$element[t]("<div class='scroll-bar "+e+"'><div class='thumb'></div></div>"),this[e+"ScrollbarAdded"]=!0)},resize:function(e){this.vScrollbar&&this.vScrollbar.resize(e),this.hScrollbar&&this.hScrollbar.resize(e)},scrollTo:function(e){this.vScrollbar&&this.vScrollbar.scrollToElement(e),this.hScrollbar&&this.hScrollbar.scrollToElement(e)},scrollToXY:function(e,t){this.scrollToX(e),this.scrollToY(t)},scrollToX:function(e){this.hScrollbar&&this.hScrollbar.scrollOverviewTo(e,!0)},scrollToY:function(e){this.vScrollbar&&this.vScrollbar.scrollOverviewTo(e,!0)},remove:function(){this.removeScrollableClass(),this.removeSkinClass(),this.removeScrollbarComponents(),this.$element.data("scrollable",null),this.removeKeyboardScrolling(),this.vScrollbar&&this.vScrollbar.remove(),this.hScrollbar&&this.hScrollbar.remove()},setAnimationSpeed:function(e){this.options.animationSpeed=e},isInside:function(t,i){var n=e(t),o=e(i),s=n.offset(),r=o.offset();return s.top>=r.top&&s.left>=r.left&&s.top+n.height()<=r.top+o.height()&&s.left+n.width()<=r.left+o.width()},initKeyboardScrolling:function(){var e=this;this.elementKeydown=function(t){document.activeElement===e.$element[0]&&(e.vScrollbar&&e.vScrollbar.keyScroll(t),e.hScrollbar&&e.hScrollbar.keyScroll(t))},this.$element.attr("tabindex","-1").keydown(this.elementKeydown)},removeKeyboardScrolling:function(){this.$element.removeAttr("tabindex").unbind("keydown",this.elementKeydown)},bindEvents:function(){this.options.onCustomScroll&&this.$element.on("customScroll",this.options.onCustomScroll)}};var r=function(e,t){this.scrollable=e,this.sizing=t,this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element),this.$thumb=this.$scrollBar.find(".thumb"),this.setScrollPosition(0,0),this.resize(),this.initMouseMoveScrolling(),this.initMouseWheelScrolling(),this.initTouchScrolling(),this.initMouseClickScrolling(),this.initWindowResize()};r.prototype={resize:function(e){this.scrollable.$viewPort.height(this.scrollable.$element.height()),this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element)),this.viewPortSize=this.sizing.size(this.scrollable.$viewPort),this.overviewSize=this.sizing.size(this.scrollable.$overview),this.ratio=this.viewPortSize/this.overviewSize,this.sizing.size(this.$scrollBar,this.viewPortSize),this.thumbSize=this.calculateThumbSize(),this.sizing.size(this.$thumb,this.thumbSize),this.maxThumbPosition=this.calculateMaxThumbPosition(),this.maxOverviewPosition=this.calculateMaxOverviewPosition(),this.enabled=this.overviewSize>this.viewPortSize,void 0===this.scrollPercent&&(this.scrollPercent=0),this.enabled?this.rescroll(e):this.setScrollPosition(0,0),this.$scrollBar.toggle(this.enabled)},calculateThumbSize:function(){var e,t=this.sizing.fixedThumbSize(this.scrollable.options);return e=t?t:this.ratio*this.viewPortSize,Math.max(e,this.sizing.minSize(this.$thumb))},initMouseMoveScrolling:function(){var t=this;this.$thumb.mousedown(function(e){t.enabled&&t.startMouseMoveScrolling(e)}),this.documentMouseup=function(e){t.stopMouseMoveScrolling(e)},e(document).mouseup(this.documentMouseup),this.documentMousemove=function(e){t.mouseMoveScroll(e)},e(document).mousemove(this.documentMousemove),this.$thumb.click(function(e){e.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind(),e(document).unbind("mouseup",this.documentMouseup),e(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var e=this;this.scrollable.$element.mousewheel(function(t,i,n,o){e.enabled&&e.mouseWheelScroll(n,o)&&(t.stopPropagation(),t.preventDefault())})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var e=this;this.elementTouchstart=function(t){e.enabled&&e.startTouchScrolling(t)},this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart),this.documentTouchmove=function(t){e.touchScroll(t)},document.addEventListener("touchmove",this.documentTouchmove),this.elementTouchend=function(t){e.stopTouchScrolling(t)},this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){document.addEventListener&&(this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart),document.removeEventListener("touchmove",this.documentTouchmove),this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend))},initMouseClickScrolling:function(){var e=this;this.scrollBarClick=function(t){e.mouseClickScroll(t)},this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var i=this;this.windowResize=function(){i.resize()},e(t).resize(this.windowResize)}},removeWindowResize:function(){e(t).unbind("resize",this.windowResize)},isKeyScrolling:function(e){return null!=this.keyScrollDelta(e)},keyScrollDelta:function(e){for(var t in this.sizing.scrollingKeys)if(t==e)return this.sizing.scrollingKeys[e](this.viewPortSize);return null},startMouseMoveScrolling:function(t){this.mouseMoveScrolling=!0,e("html").addClass("not-selectable"),this.setUnselectable(e("html"),"on"),this.setScrollEvent(t)},stopMouseMoveScrolling:function(){this.mouseMoveScrolling=!1,e("html").removeClass("not-selectable"),this.setUnselectable(e("html"),null)},setUnselectable:function(e,t){e.attr("unselectable")!=t&&(e.attr("unselectable",t),e.find(":not(input)").attr("unselectable",t))},mouseMoveScroll:function(e){if(this.mouseMoveScrolling){var t=this.sizing.mouseDelta(this.scrollEvent,e);this.scrollThumbBy(t),this.setScrollEvent(e)}},startTouchScrolling:function(e){e.touches&&1==e.touches.length&&(this.setScrollEvent(e.touches[0]),this.touchScrolling=!0,e.stopPropagation())},touchScroll:function(e){if(this.touchScrolling&&e.touches&&1==e.touches.length){var t=-this.sizing.mouseDelta(this.scrollEvent,e.touches[0])*this.scrollable.options.swipeSpeed,i=this.scrollOverviewBy(t);i&&(e.stopPropagation(),e.preventDefault(),this.setScrollEvent(e.touches[0]))}},stopTouchScrolling:function(e){this.touchScrolling=!1,e.stopPropagation()},mouseWheelScroll:function(e,t){var i=-this.sizing.wheelDelta(e,t)*this.scrollable.options.wheelSpeed;return 0!=i?this.scrollOverviewBy(i):void 0},mouseClickScroll:function(e){var t=this.viewPortSize-20;e["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()]&&(t=-t),this.scrollOverviewBy(t)},keyScroll:function(e){var t=e.which;this.enabled&&this.isKeyScrolling(t)&&this.scrollOverviewBy(this.keyScrollDelta(t))&&e.preventDefault()},scrollThumbBy:function(e){var t=this.thumbPosition();t+=e,t=this.positionOrMax(t,this.maxThumbPosition);var i=this.scrollPercent;this.scrollPercent=t/this.maxThumbPosition;var n=t*this.maxOverviewPosition/this.maxThumbPosition;return this.setScrollPosition(n,t),i!=this.scrollPercent?(this.triggerCustomScroll(i),!0):!1},thumbPosition:function(){return this.$thumb.position()[this.sizing.offsetComponent()]},scrollOverviewBy:function(e){var t=this.overviewPosition()+e;return this.scrollOverviewTo(t,!1)},overviewPosition:function(){return-this.scrollable.$overview.position()[this.sizing.offsetComponent()]},scrollOverviewTo:function(e,t){e=this.positionOrMax(e,this.maxOverviewPosition);var i=this.scrollPercent;this.scrollPercent=e/this.maxOverviewPosition;var n=this.scrollPercent*this.maxThumbPosition;return t?this.setScrollPositionWithAnimation(e,n):this.setScrollPosition(e,n),i!=this.scrollPercent?(this.triggerCustomScroll(i),!0):!1},positionOrMax:function(e,t){return 0>e?0:e>t?t:e},triggerCustomScroll:function(e){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(e,this.scrollPercent),scrollPercent:100*this.scrollPercent})},rescroll:function(e){if(e){var t=this.positionOrMax(this.overviewPosition(),this.maxOverviewPosition);this.scrollPercent=t/this.maxOverviewPosition;var i=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(t,i)}else{var i=this.scrollPercent*this.maxThumbPosition,t=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(t,i)}},setScrollPosition:function(e,t){this.$thumb.css(this.sizing.offsetComponent(),t+"px"),this.scrollable.$overview.css(this.sizing.offsetComponent(),-e+"px")},setScrollPositionWithAnimation:function(e,t){var i={},n={};i[this.sizing.offsetComponent()]=t+"px",this.$thumb.animate(i,this.scrollable.options.animationSpeed),n[this.sizing.offsetComponent()]=-e+"px",this.scrollable.$overview.animate(n,this.scrollable.options.animationSpeed)},calculateMaxThumbPosition:function(){return this.sizing.size(this.$scrollBar)-this.thumbSize},calculateMaxOverviewPosition:function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)},setScrollEvent:function(e){var t="page"+this.sizing.scrollAxis();this.scrollEvent&&this.scrollEvent[t]==e[t]||(this.scrollEvent={pageX:e.pageX,pageY:e.pageY})},scrollToElement:function(t){var i=e(t);if(this.sizing.isInside(i,this.scrollable.$overview)&&!this.sizing.isInside(i,this.scrollable.$viewPort)){var n=i.offset(),o=this.scrollable.$overview.offset();this.scrollable.$viewPort.offset(),this.scrollOverviewTo(n[this.sizing.offsetComponent()]-o[this.sizing.offsetComponent()],!0)}},remove:function(){this.removeMouseMoveScrolling(),this.removeMouseWheelScrolling(),this.removeTouchScrolling(),this.removeMouseClickScrolling(),this.removeWindowResize()}};var l=function(){};l.prototype={size:function(e,t){return t?e.width(t):e.width()},minSize:function(e){return parseInt(e.css("min-width"))||0},fixedThumbSize:function(e){return e.fixedThumbWidth},scrollBar:function(e){return e.find(".scroll-bar.horizontal")},mouseDelta:function(e,t){return t.pageX-e.pageX},offsetComponent:function(){return"left"},wheelDelta:function(e){return e},scrollAxis:function(){return"X"},scrollDirection:function(e,t){return t>e?"right":"left"},scrollingKeys:{37:function(){return-10},39:function(){return 10}},isInside:function(t,i){var n=e(t),o=e(i),s=n.offset(),r=o.offset();return s.left>=r.left&&s.left+n.width()<=r.left+o.width()}};var a=function(){};return a.prototype={size:function(e,t){return t?e.height(t):e.height()},minSize:function(e){return parseInt(e.css("min-height"))||0},fixedThumbSize:function(e){return e.fixedThumbHeight},scrollBar:function(e){return e.find(".scroll-bar.vertical")},mouseDelta:function(e,t){return t.pageY-e.pageY},offsetComponent:function(){return"top"},wheelDelta:function(e,t){return t},scrollAxis:function(){return"Y"},scrollDirection:function(e,t){return t>e?"down":"up"},scrollingKeys:{38:function(){return-10},40:function(){return 10},33:function(e){return-(e-20)},34:function(e){return e-20}},isInside:function(t,i){var n=e(t),o=e(i),s=n.offset(),r=o.offset();return s.top>=r.top&&s.top+n.height()<=r.top+o.height()}},this.each(function(){if(void 0==i&&(i=o),"string"==typeof i){var t=e(this).data("scrollable");t&&t[i](n)}else{if("object"!=typeof i)throw"Invalid type of options";i=e.extend(o,i),new s(e(this),i)}})}}(k),function(e){function i(i){var n=i||t.event,o=[].slice.call(arguments,1),s=0,r=0,l=0;return i=e.event.fix(n),i.type="mousewheel",n.wheelDelta&&(s=n.wheelDelta/120),n.detail&&(s=-n.detail/3),l=s,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(l=0,r=s),void 0!==n.wheelDeltaY&&(l=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(r=n.wheelDeltaX/120),o.unshift(i,s,r,l),(e.event.dispatch||e.event.handle).apply(this,o)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var o=n.length;o;)e.event.fixHooks[n[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],i,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(k),!function(e){e.fn.resizable=function(t){function i(e){var t=e.data,i={};t.diffX=Math.round((e.pageX-t.pageX)/s.snapSize)*s.snapSize,t.diffY=Math.round((e.pageY-t.pageY)/s.snapSize)*s.snapSize,(Math.abs(t.diffX)>0||Math.abs(t.diffY)>0)&&(s.element.height()!==t.height+t.diffY&&t.height+t.diffY>=s.minHeight&&t.height+t.diffY<=s.maxHeight&&(s.containment?t.outerHeight+t.diffY+t.offset.top<=s.containment.offset().top+s.containment.outerHeight():!0)&&(s.element.height(t.height+t.diffY),i.height=!0),s.element.width()!==t.width+t.diffX&&t.width+t.diffX>=s.minWidth&&t.width+t.diffX<=s.maxWidth&&(s.containment?t.outerWidth+t.diffX+t.offset.left<=s.containment.offset().left+s.containment.outerWidth():!0)&&(s.element.width(t.width+t.diffX),i.width=!0),(i.height||i.width)&&(s.resizeOnce&&(s.resizeOnce.bind(s.element)(e.data),s.resizeOnce=null),s.resize&&s.resize.bind(s.element)(e.data),s.alsoResize&&(!i.height||"height"!==s.alsoResizeType&&"both"!==s.alsoResizeType||s.alsoResize.height(t.alsoResizeHeight+t.diffY),!i.width||"width"!==s.alsoResizeType&&"both"!==s.alsoResizeType||s.alsoResize.width(t.alsoResizeWidth+t.diffX))))}function n(t){t.preventDefault(),s.start&&s.start.bind(s.element)();var n={alsoResizeHeight:s.alsoResize?s.alsoResize.height():0,alsoResizeWidth:s.alsoResize?s.alsoResize.width():0,height:s.element.height(),offset:s.element.offset(),outerHeight:s.element.outerHeight(),outerWidth:s.element.outerWidth(),pageX:t.pageX,pageY:t.pageY,width:s.element.width()};e(document).on("mousemove","*",n,i),e(document).on("mouseup","*",o)}function o(){s.stop&&s.stop.bind(s.element)(),e(document).off("mousemove","*",i),e(document).off("mouseup","*",o)}var s=e.extend({alsoResize:null,alsoResizeType:"both",containment:null,create:null,destroy:null,handle:".resize-handle",maxHeight:9999,maxWidth:9999,minHeight:0,minWidth:0,resize:null,resizeOnce:null,snapSize:1,start:null,stop:null},t);if(s.element=e(this),s.handle){if(s.alsoResize&&["both","height","width"].indexOf(s.alsoResizeType)>=0&&(s.alsoResize=e(s.alsoResize)),s.containment&&(s.containment=e(s.containment)),s.handle=e(s.handle),s.snapSize=s.snapSize<1?1:s.snapSize,"destroy"===t)return s.handle.off("mousedown",n),s.destroy&&s.destroy.bind(this)(),this;s.handle.on("mousedown",n),s.create&&s.create.bind(this)()}return this}}(k)}if(i){var C=document.createElement("script");return C.textContent="("+e+")(window, false)",document.body.appendChild(C),void document.body.removeChild(C)}var S={};!function(e){function t(e,t,i){var n;return t&&"object"==typeof t&&(void 0!==t[e]?n=t[e]:i&&t.get&&"function"==typeof t.get&&(n=t.get(e))),n}function i(e,t,i,n,o,s){function r(){}function l(){}r.prototype=e,l.prototype=e.subs;var a,c=new r;c.subs=new l,c.subsText={},c.buf="",n=n||{},c.stackSubs=n,c.subsText=s;for(a in t)n[a]||(n[a]=t[a]);for(a in n)c.subs[a]=n[a];o=o||{},c.stackPartials=o;for(a in i)o[a]||(o[a]=i[a]);for(a in o)c.partials[a]=o[a];return c}function n(e){return String(null===e||void 0===e?"":e)}function o(e){return e=n(e),h.test(e)?e.replace(s,"&amp;").replace(r,"&lt;").replace(l,"&gt;").replace(a,"&#39;").replace(c,"&quot;"):e}e.Template=function(e,t,i,n){e=e||{},this.r=e.code||this.r,this.c=i,this.options=n||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(){return""},v:o,t:n,render:function(e,t,i){return this.ri([e],t||{},i)},ri:function(e,t,i){return this.r(e,t,i)},ep:function(e,t){var n=this.partials[e],o=t[n.name];if(n.instance&&n.base==o)return n.instance;if("string"==typeof o){if(!this.c)throw new Error("No compiler available.");o=this.c.compile(o,this.options)}if(!o)return null;if(this.partials[e].base=o,n.subs){t.stackText||(t.stackText={});for(key in n.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);o=i(o,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=o,o},rp:function(e,t,i,n){var o=this.ep(e,i);return o?o.ri(t,i,n):""},rs:function(e,t,i){var n=e[e.length-1];if(!u(n))return void i(e,t,this);for(var o=0;o<n.length;o++)e.push(n[o]),i(e,t,this),e.pop()},s:function(e,t,i,n,o,s,r){var l;return u(e)&&0===e.length?!1:("function"==typeof e&&(e=this.ms(e,t,i,n,o,s,r)),l=!!e,!n&&l&&t&&t.push("object"==typeof e?e:t[t.length-1]),l)},d:function(e,i,n,o){var s,r=e.split("."),l=this.f(r[0],i,n,o),a=this.options.modelGet,c=null;if("."===e&&u(i[i.length-2]))l=i[i.length-1];else for(var h=1;h<r.length;h++)s=t(r[h],l,a),void 0!==s?(c=l,l=s):l="";return o&&!l?!1:(o||"function"!=typeof l||(i.push(c),l=this.mv(l,i,n),i.pop()),l)},f:function(e,i,n,o){for(var s=!1,r=null,l=!1,a=this.options.modelGet,c=i.length-1;c>=0;c--)if(r=i[c],s=t(e,r,a),void 0!==s){l=!0;break}return l?(o||"function"!=typeof s||(s=this.mv(s,i,n)),s):o?!1:""},ls:function(e,t,i,o,s){var r=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(n(e.call(t,o)),t,i)),this.options.delimiters=r,!1},ct:function(e,t,i){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,i)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,i,n,o,s,r){var l,a=t[t.length-1],c=e.call(a);return"function"==typeof c?n?!0:(l=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,a,i,l.substring(o,s),r)):c},mv:function(e,t,i){var o=t[t.length-1],s=e.call(o);return"function"==typeof s?this.ct(n(s.call(o)),o,i):s},sub:function(e,t,i,n){var o=this.subs[e];o&&(this.activeSub=e,o(t,i,this,n),this.activeSub=!1)}};var s=/&/g,r=/</g,l=/>/g,a=/\'/g,c=/\"/g,h=/[&<>\"\']/,u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof exports?exports:S);var x=function(){function e(e){return e=t[e],function(i,n,o){return e.render(i,n||t,o)}}var t={};t.emote=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="emote" data-emote="'),n.b(n.v(n.f("text",e,t,0))),n.b('" title="'),n.b(n.v(n.f("text",e,t,0))),n.b('">\r'),n.b("\n"+i),n.b("	"),n.b(n.t(n.f("image",e,t,0))),n.b("\r"),n.b("\n"+i),n.b("</div>\r"),n.b("\n"),n.fl()},partials:{},subs:{}}),t.emoteButton=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.b('<button class="button glyph-only" title="Emote Menu" id="emote-menu-button"></button>\r'),n.b("\n"),n.fl()},partials:{},subs:{}}),t.emoteGroupHeader=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.s(n.f("isAddonHeader",e,t,1),e,t,0,18,218,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b('	<div class="group-header addon-emotes-header" title="Below are emotes added by an addon. Only those who also have the same addon installed can see these emotes in chat.">\r'),n.b("\n"+i),n.b("		Addon Emotes\r"),n.b("\n"+i),n.b("	</div>\r"),n.b("\n"+i)}),e.pop()),n.b("\r"),n.b("\n"+i),n.s(n.f("isAddonHeader",e,t,1),e,t,1,0,0,"")||(n.b('	<div class="group-header" data-emote-channel="'),n.b(n.v(n.f("channel",e,t,0))),n.b('"><img src="'),n.b(n.v(n.f("badge",e,t,0))),n.b('" />'),n.b(n.v(n.f("channel",e,t,0))),n.b("</div>\r"),n.b("\n"+i)),n.fl()},partials:{},subs:{}}),t.menu=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.b('<div class="emote-menu dropmenu" id="emote-menu-for-twitch">\r'),n.b("\n"+i),n.b('	<div class="draggable"></div>\r'),n.b("\n"+i),n.b("\r"),n.b("\n"+i),n.b('	<div class="group-header">All Emotes</div>\r'),n.b("\n"+i),n.b('	<div class="group-container scrollable" id="all-emotes-group"></div>\r'),n.b("\n"+i),n.b("\r"),n.b("\n"+i),n.b('	<div class="group-header">Popular Emotes</div>\r'),n.b("\n"+i),n.b('	<div class="group-container single-row" id="popular-emotes-group"></div>\r'),n.b("\n"+i),n.b("\r"),n.b("\n"+i),n.b('	<div class="footer">\r'),n.b("\n"+i),n.b('		<a class="pull-left icon icon-github" href="https://github.com/cletusc/Userscript--Twitch-Chat-Emotes" target="_blank" title="Visit the project page on Github"></a>\r'),n.b("\n"+i),n.b('		<a class="pull-left icon icon-pin" data-command="toggle-pinned" title="Pin/unpin the emote menu to the screen"></a>\r'),n.b("\n"+i),n.b('		<a title="Reset the popularity of the emotes back to default" data-command="reset-popularity">Reset Popularity</a>\r'),n.b("\n"+i),n.b('		<a class="pull-right icon icon-resize-handle" data-command="resize-handle"></a>\r'),n.b("\n"+i),n.b("	</div>\r"),n.b("\n"+i),n.b("</div>\r"),n.b("\n"),n.fl()},partials:{},subs:{}}),t.newsMessage=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.b("\r"),n.b("\n"+i),n.b('<div class="twitch-chat-emotes-news">\r'),n.b("\n"+i),n.b("	["),n.b(n.v(n.f("scriptName",e,t,0))),n.b("] News: "),n.b(n.t(n.f("message",e,t,0))),n.b(' (<a href="#" data-command="twitch-chat-emotes:dismiss-news" data-news-id="'),n.b(n.v(n.f("id",e,t,0))),n.b('">Dismiss</a>)\r'),n.b("\n"+i),n.b("</div>\r"),n.b("\n"),n.fl()},partials:{},subs:{}}),t.styles=new S.Template({code:function(e,t,i){var n=this;return n.b(i=i||""),n.b("/**"),n.b("\n"+i),n.b(" * Minified file. Third-party version information can be found in /package.json."),n.b("\n"+i),n.b(" * Original filename: \\node_modules\\jquery-custom-scrollbar\\jquery.custom-scrollbar.css"),n.b("\n"+i),n.b(" */"),n.b("\n"+i),n.b(".scrollable{position:relative}.scrollable:focus{outline:0}.scrollable .viewport{position:relative;overflow:hidden}.scrollable .viewport .overview{position:absolute}.scrollable .scroll-bar{display:none}.scrollable .scroll-bar.vertical{position:absolute;right:0;height:100%}.scrollable .scroll-bar.horizontal{position:relative;width:100%}.scrollable .scroll-bar .thumb{position:absolute}.scrollable .scroll-bar.vertical .thumb{width:100%;min-height:10px}.scrollable .scroll-bar.horizontal .thumb{height:100%;min-width:10px;left:0}.not-selectable{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.scrollable.default-skin{padding-right:10px;padding-bottom:6px}.scrollable.default-skin .scroll-bar.vertical{width:6px}.scrollable.default-skin .scroll-bar.horizontal{height:6px}.scrollable.default-skin .scroll-bar .thumb{background-color:#000;opacity:.4;border-radius:3px;-moz-border-radius:4px;-webkit-border-radius:4px}.scrollable.default-skin .scroll-bar:hover .thumb{opacity:.6}.scrollable.gray-skin{padding-right:17px}.scrollable.gray-skin .scroll-bar{border:1px solid gray;background-color:#d3d3d3}.scrollable.gray-skin .scroll-bar .thumb{background-color:gray}.scrollable.gray-skin .scroll-bar:hover .thumb{background-color:#000}.scrollable.gray-skin .scroll-bar.vertical{width:10px}.scrollable.gray-skin .scroll-bar.horizontal{height:10px;margin-top:2px}.scrollable.modern-skin{padding-right:17px}.scrollable.modern-skin .scroll-bar{border:1px solid gray;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;-moz-box-shadow:inset 0 0 5px #888;-webkit-box-shadow:inset 0 0 5px #888;box-shadow:inset 0 0 5px #888}.scrollable.modern-skin .scroll-bar .thumb{background-color:#95aabf;border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;border:1px solid #536984}.scrollable.modern-skin .scroll-bar.vertical .thumb{width:8px;background:-moz-linear-gradient(left,#95aabf 0,#547092 100%);background:-webkit-gradient(linear,left top,right top,color-stop(0%,#95aabf),color-stop(100%,#547092));background:-webkit-linear-gradient(left,#95aabf 0,#547092 100%);background:-o-linear-gradient(left,#95aabf 0,#547092 100%);background:-ms-linear-gradient(left,#95aabf 0,#547092 100%);background:linear-gradient(to right,#95aabf 0,#547092 100%);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient( startColorstr='#95aabf', endColorstr='#547092',GradientType=1 )\"}.scrollable.modern-skin .scroll-bar.horizontal .thumb{height:8px;background-image:linear-gradient(#95aabf,#547092);background-image:-o-linear-gradient(#95aabf,#547092);background-image:-moz-linear-gradient(#95aabf,#547092);background-image:-webkit-linear-gradient(#95aabf,#547092);background-image:-ms-linear-gradient(#95aabf,#547092);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient( startColorstr='#95aabf', endColorstr='#547092',GradientType=0 )\"}.scrollable.modern-skin .scroll-bar.vertical{width:10px}.scrollable.modern-skin .scroll-bar.horizontal{height:10px;margin-top:2px}"),n.b("\n"+i),n.b("/**"),n.b("\n"+i),n.b(" * Minified file. Third-party version information can be found in /package.json."),n.b("\n"+i),n.b(" * Original filename: \\src\\styles\\style.css"),n.b("\n"+i),n.b(" */"),n.b("\n"+i),n.b("#emote-menu-button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAQCAYAAAAbBi9cAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKUSURBVDhPfZTNi1JRGMZvMIsWUZts5SIXFYK0CME/IGghxVC7WUoU1NBixI+mRSD4MQzmxziKO3XUBhRmUGZKdBG40XEGU6d0GFGZcT4qxW1hi7fzvNwZqKwDD5z7vs/vueeee+6VMJxO5wUhhdvtfuHz+T4tLS2NhegfGsMDLxiwHIIhLi57PJ75VCr1Y39/n4bDIY1Go4lCDx54wYCVYzjoVjQa/dxutyfCkwSvYJpgOSQf708tuBa1yWRy/L+V/Cl4wYBFhhTxfLhum/esiiJ1u12KRCJksVhofX2dTk5OzkHMUUMPHnjB2F55VpEhPde/Lbx8FqBEIkHpdJoMBgNptVrS6XRUqVTOg7a3t2lmZob0ej2p1Wr2ggGLDOnJ3QSZH4coHo/TysoKhygUCtJoNFQsFmkwGLAwR7hSqSSVSsVeMGCRIT29F6fXJi8Xy+Uymc1mmp6eJofDQfV6nU5PT1mY2+127uHxSqUSh4FFhhQLvrvtcrm+YpkHBwdUrVZpa2uLarUadTodOjw8ZGGOGnrwwAsGLDLw1i4uLrzRYeOOj49pb2+Pdnd3qdVq8StGAIQ5ao1Ggz3wggGLDD4C4izcEcWfR0dHbMrlcrSxscGbjVAIK8lms7S5ucmB/X6fXz9YDsEQFzdjsVit2Wzyqc1kMrwfVquVjEYjzc3NkclkIpvNRmtra+yBVzAfBXtDjuGgS8FgcFbc8QvuhjNSKBQoFAqR6LFEn/L5PPfggXd5eXkWrBzDQdC1QCBgFoeut7Ozw/tyBp2FQzhPwtOFFwzY34Yo4A9wRXzdD8LhcE48wncE9no9Fuaoid574bkPLxgZ/3uI5pTQVfFlP/L7/Wmhb7JSXq/3IXrwyHZ5SNIvGCnqyh+J7+gAAAAASUVORK5CYII=)!important;background-position:50%;background-repeat:no-repeat;cursor:pointer;margin-left:7px}#emote-menu-button.active{border-radius:2px;background-color:rgba(128,128,128,.5)}.emote-menu{padding:5px;z-index:1000;display:none;background-color:#202020}.emote-menu a{color:#fff}.emote-menu a:hover{cursor:pointer;text-decoration:underline;color:#ccc}.emote-menu .emotes-popular{height:38px}.emote-menu .draggable{background-image:repeating-linear-gradient(45deg,transparent,transparent 5px,rgba(255,255,255,.05) 5px,rgba(255,255,255,.05) 10px);cursor:move;height:7px;margin-bottom:3px}.emote-menu .draggable:hover{background-image:repeating-linear-gradient(45deg,transparent,transparent 5px,rgba(255,255,255,.1) 5px,rgba(255,255,255,.1) 10px)}.emote-menu .group-header{border-top:1px solid #000;box-shadow:0 1px 0 rgba(255,255,255,.05) inset;background-image:linear-gradient(to top,transparent,rgba(0,0,0,.5));padding:2px;color:#ddd;text-align:center}.emote-menu .group-header img{margin-right:8px}.emote-menu .emote{display:inline-block;padding:2px;margin:1px;cursor:pointer;border-radius:5px;text-align:center;position:relative;width:32px;height:32px}.emote-menu .emote img{max-width:32px;max-height:32px;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0}.emote-menu .single-row{overflow:hidden;height:37px}.emote-menu .single-row .emote{display:inline-block;margin-bottom:100px}.emote-menu .emote:hover{background-color:rgba(255,255,255,.1)}.emote-menu .pull-left{float:left}.emote-menu .pull-right{float:right}.emote-menu .footer{text-align:center;border-top:1px solid #000;box-shadow:0 1px 0 rgba(255,255,255,.05) inset;padding:5px 0 2px;margin-top:5px}.emote-menu .footer .pull-left{margin-right:5px}.emote-menu .footer .pull-right{margin-left:5px}.emote-menu .icon{height:16px;width:16px;opacity:.5}.emote-menu .icon:hover{opacity:1}.emote-menu .icon-github{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiIAAC4iAari3ZIAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAWpJREFUOE+F0ssrRGEYx/EZBhs2ssHCrCasFf4DFiKyERuytRMZESl3WxsbK0s2FlKKxkIJOyRpEgtyv19yfH/H87qm86tPvee9POd5z0zodzzPK8I4NnFuNjCKmG37GxbTMYEXrKMb9aYHKviMYaTZsY8wocPzOEENbOUrzIWhYmeYQ8SW/MUxnKICekMhNJ+FTBvraiOohK414A7HoNbqUAvlCcd4NRprj1KFBmhPVAWGsAXXYlCqkYJt9KnAGvrhxkFJWOe66ooGaq8REdwgKBdQBy1IqsARmqArqFhQktC5VhxosIpBa2sKQZm0vfrPLGmg++uD5KAYKvhflpGNVOwjrgIFeEAbZhFFGXbhkkAJwvZ2tX+HPD1rohdXtnAI/axvcPE/nO0thT52p39Y4UEtzeAS7SjHI1zUYQaacY1p+AU/w4SKxHEPfRP9A1003sEt9IKfh7+HxXx0YRF7ZgEdyLVtllDoHUPsDkVplXakAAAAAElFTkSuQmCC) no-repeat 50%}.emote-menu .icon-resize-handle{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAX0lEQVQ4T6WPUQ7AIAhDPfpuzuyHxpGK7SR5IVYeCS0irqChAw0daOhAQwcaijyAfShARv1aMOWOfcJHBnmgIsvo8glMRkkLtnLneEIpg3U4c5LRtycoMqpcMIaLd7QXl2chH51cR7QAAAAASUVORK5CYII=) no-repeat 50%;cursor:nwse-resize!important}.emote-menu .icon-pin{background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnDQogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iDQogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIg0KICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIg0KICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyINCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyINCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCINCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIg0KICAgaGVpZ2h0PSIxNiINCiAgIHZlcnNpb249IjEuMSINCiAgIHdpZHRoPSIxNiINCiAgIGlkPSJzdmczMDA1Ig0KICAgaW5rc2NhcGU6dmVyc2lvbj0iMC40OC40IHI5OTM5Ig0KICAgc29kaXBvZGk6ZG9jbmFtZT0icGluLnN2ZyI+DQogIDxtZXRhZGF0YQ0KICAgICBpZD0ibWV0YWRhdGEzMDIzIj4NCiAgICA8cmRmOlJERj4NCiAgICAgIDxjYzpXb3JrDQogICAgICAgICByZGY6YWJvdXQ9IiI+DQogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0Pg0KICAgICAgICA8ZGM6dHlwZQ0KICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPg0KICAgICAgPC9jYzpXb3JrPg0KICAgIDwvcmRmOlJERj4NCiAgPC9tZXRhZGF0YT4NCiAgPGRlZnMNCiAgICAgaWQ9ImRlZnMzMDIxIiAvPg0KICA8c29kaXBvZGk6bmFtZWR2aWV3DQogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiINCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiDQogICAgIGJvcmRlcm9wYWNpdHk9IjEiDQogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiDQogICAgIGdyaWR0b2xlcmFuY2U9IjEwIg0KICAgICBndWlkZXRvbGVyYW5jZT0iMTAiDQogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIg0KICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIg0KICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE5MjAiDQogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwNTgiDQogICAgIGlkPSJuYW1lZHZpZXczMDE5Ig0KICAgICBzaG93Z3JpZD0iZmFsc2UiDQogICAgIGlua3NjYXBlOnpvb209IjM2LjI5MTY2NyINCiAgICAgaW5rc2NhcGU6Y3g9IjcuNzAxNDkyNSINCiAgICAgaW5rc2NhcGU6Y3k9IjguNjkzNDU1OCINCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjE5MTIiDQogICAgIGlua3NjYXBlOndpbmRvdy15PSItOCINCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSINCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0iZzMwMDkiIC8+DQogIDxnDQogICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzkzMDc4MiwwLDAsMC43OTMwNzgyLC0yLjE3MDk4NSwtODE0LjY5Mjk5KSINCiAgICAgaWQ9ImczMDA3Ij4NCiAgICA8Zw0KICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzA3MTEsMC43MDcxMSwtMC43MDcxMSwwLjcwNzExLDczNy43MDc1NSwyOTUuNDg4MDgpIg0KICAgICAgIGlkPSJnMzAwOSI+DQogICAgICA8cGF0aA0KICAgICAgICAgZD0ibSAxMSwxMDI4LjQgdiAxMyBoIDEgNi40MDYgYyAtMC41OTUsLTEuMSAtMS40MTYsLTIuMSAtMi40MDYsLTIuOCB2IC04IGMgMC42MTYsLTAuNiAxLjEzMSwtMS40IDEuNTMxLC0yLjIgSCAxMiAxMSB6Ig0KICAgICAgICAgaWQ9InBhdGgzMDExIg0KICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCINCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmNWY1ZjU7ZmlsbC1vcGFjaXR5OjEiIC8+DQogICAgICA8cGF0aA0KICAgICAgICAgZD0ibSAxMSwxMyB2IDIgNCAyIGwgMSwyIHYgLTIgLTYgLTIgaCAtMSB6Ig0KICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwxMDI4LjQpIg0KICAgICAgICAgaWQ9InBhdGgzMDEzIg0KICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCINCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmNWY1ZjU7ZmlsbC1vcGFjaXR5OjEiIC8+DQogICAgICA8cGF0aA0KICAgICAgICAgZD0ibSAxMiwxMyB2IDIgNCAyIDIgbCAxLC0yIHYgLTIgLTQgLTIgaCAtMSB6Ig0KICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwxMDI4LjQpIg0KICAgICAgICAgaWQ9InBhdGgzMDE1Ig0KICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCINCiAgICAgICAgIHN0eWxlPSJmaWxsOiNlYmViZWI7ZmlsbC1vcGFjaXR5OjEiIC8+DQogICAgICA8cGF0aA0KICAgICAgICAgZD0ibSA2LjQ2ODgsMTAyOC40IGMgMC40MDA2LDAuOCAwLjkxNSwxLjYgMS41MzEyLDIuMiB2IDggYyAtMC45ODk3LDAuNyAtMS44MTEzLDEuNyAtMi40MDYyLDIuOCBIIDEyIHYgLTEzIEggNi40Njg4IHoiDQogICAgICAgICBpZD0icGF0aDMwMTciDQogICAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIg0KICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MSIgLz4NCiAgICA8L2c+DQogIDwvZz4NCjwvc3ZnPg0K) no-repeat 50%;transition:all .25s ease}.emote-menu .icon-pin:hover,.emote-menu.pinned .icon-pin{transform:rotate(-45deg);opacity:1}.emote-menu .scrollable.default-skin{padding-right:0;padding-bottom:0}.emote-menu .scrollable.default-skin .scroll-bar .thumb{background-color:#555;opacity:.2;z-index:1}"),n.fl()
},partials:{},subs:{}});var i={},n=null;for(n in t)t.hasOwnProperty(n)&&(i[n]=e(n));return i}(),y={name:"twitch-chat-emotes",version:"0.6.0",homepage:"http://cletusc.github.io/Userscript--Twitch-Chat-Emotes/",bugs:"https://github.com/cletusc/Userscript--Twitch-Chat-Emotes/issues",author:"Ryan Chatham <ryan.b.chatham@gmail.com> (https://github.com/cletusc)",repository:{type:"git",url:"https://github.com/cletusc/Userscript--Twitch-Chat-Emotes.git"},userscript:{name:"Twitch Chat Emotes",namespace:"#Cletus",version:"{{{pkg.version}}}",description:'Adds a button to Twitch that allows you to "click-to-insert" an emote.',copyright:"2011+, {{{pkg.author}}}",author:"{{{pkg.author}}}",icon:"http://www.gravatar.com/avatar.php?gravatar_id=6875e83aa6c563790cb2da914aaba8b3&r=PG&s=48&default=identicon",license:"Creative Commons; http://creativecommons.org/licenses/by-nc-sa/3.0/",homepage:"{{{pkg.homepage}}}",supportURL:"{{{pkg.bugs}}}",contributionURL:"http://cletusc.github.io/Userscript--Twitch-Chat-Emotes/#donate",grant:"none",include:"http://*.twitch.tv/*",exclude:["http://api.twitch.tv/*","http://chatdepot.twitch.tv/*","http://*.twitch.tv/*/profile*"]},scripts:{install:"napa"},devDependencies:{napa:"~0.4.1",gulp:"^3.8.3","hogan.js":"^3.0.2","gulp-concat":"^2.2.0","gulp-conflict":"^0.1.2","gulp-css-base64":"^1.1.0","gulp-minify-css":"^0.3.5","gulp-header":"^1.0.2","gulp-hogan-compile":"^0.2.1","vinyl-map":"^1.0.1","gulp-rename":"^1.2.0","gulp-uglify":"^0.3.1"},napa:{"jquery-custom-scrollbar":"mzubala/jquery-custom-scrollbar#0.5.5"}},z=null,k=null,T={usable:[],get raw(){return t.App?t.App.__container__.lookup("controller:emoticons").get("emoticons"):[]},subscriptions:{badges:{},emotes:{}}},M=!1,D=!1,N={chatButton:null,menuButtonContainer:null,chatContainer:null,chatBox:null,menuButton:null,menu:null},P=y.userscript.name,R={ALREADY_RUNNING:"There is already an instance of this script running, cancelling this instance.",NO_CHAT_ELEMENT:"There is no chat element on the page, unable to continue.",OBJECTS_NOT_LOADED:"Needed objects haven't loaded yet.",TIMEOUT_SCRIPT_LOAD:"Script took too long to load. Refresh to try again."},E={user:{login:function(){return t.Twitch&&t.Twitch.user.isLoggedIn()?!0:(z.login(),!1)}}};for(var O in R)R.hasOwnProperty(O)&&(R[O]="["+P+"]: "+R[O]);!function Y(e){var i=t.App&&(t.App.ChannelRoute||t.App.ChatRoute),s=t.Twitch!==n&&t.App!==n&&t.App.__container__!==n&&t.App.__container__.lookup("controller:emoticons").get("emoticons")!==n&&t.App.__container__.lookup("controller:emoticons").get("emoticons").length&&t.jQuery!==n&&document.querySelector("#chat_speak, .send-chat-button");if(!D&&i){var r={activate:function(){this._super(),Y(50)}};t.App.ChannelRoute&&(t.App.ChannelRoute.reopen(r),D=!0),t.App.ChatRoute&&(t.App.ChatRoute.reopen(r),D=!0)}return document.querySelector("#emote-menu-for-twitch")?void console.warn(R.ALREADY_RUNNING):s&&i?void o():e>=6e4?void console.error(R.TIMEOUT_SCRIPT_LOAD):(e>=1e4&&(s||console.warn(R.OBJECTS_NOT_LOADED)),void setTimeout(Y,e,2*e))}(50)}(this.unsafeWindow||window,window.chrome?!0:!1);